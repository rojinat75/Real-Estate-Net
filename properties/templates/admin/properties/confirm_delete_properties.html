{% extends "admin/base_site.html" %}
{% load static %}

{% block extrastyle %}
{{ block.super }}
<style>
.confirmation-page {
    max-width: 800px;
    margin: 0 auto;
}

.deletion-warning {
    background: linear-gradient(135deg, #ffeaa7, #fab1a0);
    border: 2px solid #e17055;
    border-radius: 10px;
    padding: 20px;
    margin: 20px 0;
    display: flex;
    align-items: center;
    gap: 15px;
}

.deletion-icon {
    font-size: 3em;
    color: #e17055;
}

.warning-content h3 {
    margin: 0 0 10px 0;
    color: #d63031;
}

.warning-content p {
    margin: 5px 0;
    color: #636e72;
}

.property-info {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 20px;
    margin: 20px 0;
}

.property-count {
    font-size: 1.2em;
    font-weight: bold;
    color: #2d3436;
    margin-bottom: 15px;
}

.property-list {
    max-height: 300px;
    overflow-y: auto;
    background: white;
    border: 1px solid #dee2e6;
    border-radius: 5px;
    padding: 10px;
}

.property-list li {
    padding: 8px 0;
    border-bottom: 1px solid #f1f2f6;
    color: #636e72;
}

.property-list li:last-child {
    border-bottom: none;
}

.actions-section {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 2px solid #dee2e6;
}

.confirmation-buttons {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.btn-cancel {
    background: linear-gradient(135deg, #6c757d, #495057);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    text-decoration: none;
    display: inline-block;
}

.btn-cancel:hover {
    background: linear-gradient(135deg, #5a6268, #42464a);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(108, 117, 125, 0.3);
}

.btn-delete {
    background: linear-gradient(135deg, #dc3545, #c82333);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
}

.btn-delete:hover {
    background: linear-gradient(135deg, #c82333, #a02622);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(220, 53, 69, 0.3);
}

@media (max-width: 768px) {
    .confirmation-buttons {
        flex-direction: column;
    }

    .btn-cancel,
    .btn-delete {
        width: 100%;
        text-align: center;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="confirmation-page">
    <h1>{{ opts.app_label|capfirst }} {{ opts.model_name|capfirst }} Administration</h1>

    <div class="breadcrumbs">
        <a href="{% url 'admin:index' %}">Home</a> ‚Ä∫
        <a href="{% url 'admin:properties_property_changelist' %}">{{ opts.app_label|capfirst }}</a> ‚Ä∫
        <a href="{% url 'admin:properties_property_changelist' %}">{{ opts.model_name|capfirst }}</a> ‚Ä∫
        Delete Selected Properties
    </div>

    <div class="deletion-warning">
        <div class="deletion-icon">‚ö†Ô∏è</div>
        <div class="warning-content">
            <h3>Permanent Property Deletion</h3>
            <p><strong>This action cannot be undone!</strong></p>
            <p>All selected properties and their associated images will be permanently removed from the database.</p>
        </div>
    </div>

    <div class="property-info">
        <div class="property-count">
            You have selected <strong>{{ properties_count }}</strong> propert{% if properties_count != 1 %}ies{% else %}y{% endif %} for deletion.
        </div>

        {% if properties_count <= 10 %}
        <div class="property-list">
            <strong>Properties to be deleted:</strong>
            <ul>
                {% for property_title in properties_list %}
                <li>{{ property_title }}</li>
                {% endfor %}
            </ul>
        </div>
        {% else %}
        <div class="property-list">
            <strong>Properties to be deleted (showing first 10 of {{ properties_count }}):</strong>
            <ul>
                {% for property_title in properties_list %}
                <li>{{ property_title }}</li>
                {% endfor %}
                <li><em>... and {{ properties_count|add:-10 }} more properties</em></li>
            </ul>
        </div>
        {% endif %}
    </div>

    <div class="actions-section">
        <h3>Are you sure you want to delete these properties?</h3>
        <p>This will permanently delete all selected properties and any associated images. This action cannot be reversed.</p>

        <div class="confirmation-buttons">
            <a href="{% url 'admin:properties_property_changelist' %}" class="btn-cancel">
                ‚Üê Cancel and Return to Properties List
            </a>
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="confirm_delete" value="1">
                <input type="hidden" name="action" value="{{ action_name }}">
                {% for obj in queryset %}
                <input type="hidden" name="_selected_action" value="{{ obj.pk }}">
                {% endfor %}
                <button type="submit" class="btn-delete" onclick="return confirm('Are you absolutely sure you want to delete these {{ properties_count }} properties? This cannot be undone!')">
                    üóëÔ∏è Yes, Delete All Selected Properties
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
