{% extends "admin/base_site.html" %}
{% load static %}
{% load admin_urls %}

{% block title %}Fake Image Detection{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">Home</a>
    &rsaquo; <a href="{% url 'admin:app_list' app_label='properties' %}">Properties</a>
    &rsaquo; <a href="{% url 'admin:properties_image_changelist' %}">Images</a>
    &rsaquo; Fake Detection
</div>
{% endblock %}

{% block content %}
<div class="module">
    <h2>üîç Run Fake Image Detection</h2>
    <p class="description">{{ description }}</p>

    <div class="detection-info">
        <h3>üìã Detection Criteria</h3>
        <ul>
            <li><strong>File Size:</strong> Images smaller than 10KB are flagged</li>
            <li><strong>Dimensions:</strong> Images smaller than 300x300 pixels are flagged</li>
            <li><strong>Duplicates:</strong> Images marked as duplicates are flagged</li>
            <li><strong>Captions:</strong> Images with very short captions are flagged</li>
            <li><strong>Status:</strong> Already flagged images are considered suspicious</li>
        </ul>

        <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 15px; margin: 20px 0;">
            <h4 style="margin: 0 0 10px 0; color: #856404;">‚ö†Ô∏è Important Notes</h4>
            <ul style="margin: 0; color: #856404;">
                <li>This process will scan all property images in the database</li>
                <li>Flagged images will be marked for admin review, not automatically deleted</li>
                <li>Property owners will not be notified during this automated process</li>
                <li>You can review and approve/reject flagged images in the review queue</li>
            </ul>
        </div>
    </div>

    <form method="post" class="detection-form">
        {% csrf_token %}
        <div style="text-align: center; padding: 30px;">
            <button type="submit" class="button" style="font-size: 16px; padding: 15px 30px; background: linear-gradient(135deg, #dc3545, #c82333);">
                üîç Start Fake Detection Scan
            </button>
            <p style="margin: 15px 0 0 0; color: #6c757d; font-size: 14px;">
                This may take a few minutes depending on the number of images
            </p>
        </div>
    </form>

    <div class="back-links">
        <a href="{% url 'admin:properties_image_changelist' %}" class="button">‚Üê Back to Images</a>
        <a href="{% url 'admin:properties_image_review_queue' %}" class="button">View Review Queue</a>
    </div>
</div>

<style>
.module {
    max-width: 800px;
    margin: 0 auto;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    overflow: hidden;
}

.module h2 {
    background: linear-gradient(135deg, #0033A0, #DC143C);
    color: white;
    padding: 15px 20px;
    margin: 0;
    font-size: 1.3em;
}

.module h3 {
    background: #f8f9fa;
    color: #0033A0;
    padding: 10px 20px;
    margin: 0;
    font-size: 1.1em;
    border-bottom: 1px solid #dee2e6;
}

.description {
    background: #e3f2fd;
    color: #1565c0;
    padding: 10px 20px;
    margin: 0;
    font-style: italic;
}

.detection-info {
    padding: 20px;
}

.detection-info ul {
    margin: 10px 0;
    padding-left: 20px;
}

.detection-info li {
    margin: 8px 0;
    line-height: 1.5;
}

.detection-form {
    padding: 20px;
    border-top: 1px solid #dee2e6;
}

.button {
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-block;
    text-align: center;
    margin: 0 5px;
}

.button:hover {
    background: linear-gradient(135deg, #0056b3, #004085);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0,123,255,0.3);
}

.back-links {
    padding: 20px;
    border-top: 1px solid #dee2e6;
    text-align: center;
}

.back-links .button {
    margin: 0 10px;
}

@media (max-width: 768px) {
    .module {
        margin: 0 10px;
    }

    .button {
        display: block;
        width: 100%;
        margin: 10px 0;
    }

    .back-links .button {
        display: inline-block;
        width: auto;
    }
}
</style>
{% endblock %}
