{% extends 'base.html' %}
{% load static %}

{% block title %}Payment Methods - Gorkha Real Estate{% endblock %}

{% block extra_css %}
<style>
.payment-methods-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 40px 20px;
}

.payment-header {
    text-align: center;
    margin-bottom: 50px;
}

.payment-header h1 {
    color: var(--nepal-blue);
    font-size: 3em;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
}

.payment-header p {
    color: #666;
    font-size: 1.2em;
    max-width: 600px;
    margin: 0 auto;
}

.methods-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
}

.payment-method {
    background: white;
    border-radius: 15px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 2px solid transparent;
    cursor: pointer;
}

.payment-method:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    border-color: var(--nepal-blue);
}

.payment-method.selected {
    border-color: var(--nepal-blue);
    background: linear-gradient(135deg, #f0f7ff, #e3f2fd);
}

.method-icon {
    font-size: 4em;
    margin-bottom: 20px;
    color: var(--nepal-blue);
}

.method-name {
    font-size: 1.5em;
    color: var(--nepal-blue);
    margin-bottom: 15px;
    font-weight: 700;
}

.method-description {
    color: #666;
    margin-bottom: 20px;
    line-height: 1.6;
}

.method-features {
    list-style: none;
    padding: 0;
    margin: 20px 0;
    text-align: left;
}

.method-features li {
    padding: 8px 0;
    display: flex;
    align-items: center;
    gap: 10px;
}

.method-features li i {
    color: var(--nepal-blue);
    font-size: 1.2em;
    width: 20px;
}

.method-button {
    background: linear-gradient(135deg, var(--nepal-blue), var(--nepal-crimson));
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 25px;
    font-size: 1.1em;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.method-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(0,51,160,0.3);
}

.popular-badge {
    background: var(--nepal-crimson);
    color: white;
    padding: 5px 15px;
    border-radius: 15px;
    font-size: 0.8em;
    font-weight: 700;
    text-transform: uppercase;
    margin-bottom: 15px;
    display: inline-block;
}

.security-info {
    background: #f8f9fa;
    padding: 40px;
    border-radius: 15px;
    margin-top: 40px;
}

.security-info h2 {
    color: var(--nepal-blue);
    text-align: center;
    margin-bottom: 30px;
}

.security-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.security-item {
    text-align: center;
    padding: 20px;
}

.security-item i {
    font-size: 3em;
    color: var(--nepal-blue);
    margin-bottom: 15px;
}

.security-item h3 {
    color: var(--nepal-blue);
    margin-bottom: 10px;
}

.security-item p {
    color: #666;
    margin: 0;
}

.faq-section {
    background: white;
    padding: 40px;
    border-radius: 15px;
    margin-top: 30px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.faq-item {
    background: #f8f9fa;
    margin-bottom: 20px;
    border-radius: 10px;
    overflow: hidden;
}

.faq-question {
    padding: 20px;
    cursor: pointer;
    font-weight: 600;
    color: var(--nepal-blue);
    background: linear-gradient(135deg, #e9ecef, #dee2e6);
    border-bottom: 1px solid #ced4da;
}

.faq-answer {
    padding: 20px;
    color: #666;
    line-height: 1.6;
    display: none;
}

@media (max-width: 768px) {
    .methods-grid {
        grid-template-columns: 1fr;
    }

    .payment-header h1 {
        font-size: 2.5em;
    }

    .security-grid {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="payment-methods-container">
    <div class="payment-header">
        <h1>üí≥ Choose Your Payment Method</h1>
        <p>Select from our secure payment options to upgrade your property listing</p>
    </div>

    <div class="methods-grid">
        <!-- eSewa -->
        <div class="payment-method" onclick="selectPaymentMethod('esewa')">
            <div class="popular-badge">Most Popular</div>
            <div class="method-icon">üì±</div>
            <div class="method-name">eSewa</div>
            <div class="method-description">
                Nepal's leading digital wallet for instant payments
            </div>
            <ul class="method-features">
                <li><i class="fas fa-check"></i> Instant payment</li>
                <li><i class="fas fa-check"></i> No bank account needed</li>
                <li><i class="fas fa-check"></i> Widely accepted in Nepal</li>
                <li><i class="fas fa-check"></i> Mobile app integration</li>
            </ul>
            <button class="method-button">Pay with eSewa</button>
        </div>

        <!-- Khalti -->
        <div class="payment-method" onclick="selectPaymentMethod('khalti')">
            <div class="method-icon">üí≥</div>
            <div class="method-name">Khalti</div>
            <div class="method-description">
                Digital wallet and payment gateway for Nepal
            </div>
            <ul class="method-features">
                <li><i class="fas fa-check"></i> Quick and secure</li>
                <li><i class="fas fa-check"></i> Multiple payment options</li>
                <li><i class="fas fa-check"></i> Cashback offers</li>
                <li><i class="fas fa-check"></i> Easy mobile payments</li>
            </ul>
            <button class="method-button">Pay with Khalti</button>
        </div>

        <!-- Credit/Debit Card -->
        <div class="payment-method" onclick="selectPaymentMethod('credit_card')">
            <div class="method-icon">üí≥</div>
            <div class="method-name">Credit/Debit Card</div>
            <div class="method-description">
                Pay securely with your Visa, MasterCard, or other cards
            </div>
            <ul class="method-features">
                <li><i class="fas fa-check"></i> International cards accepted</li>
                <li><i class="fas fa-check"></i> Secure encryption</li>
                <li><i class="fas fa-check"></i> Instant processing</li>
                <li><i class="fas fa-check"></i> 3D Secure protection</li>
            </ul>
            <button class="method-button">Pay with Card</button>
        </div>

        <!-- Bank Transfer -->
        <div class="payment-method" onclick="selectPaymentMethod('bank_transfer')">
            <div class="method-icon">üè¶</div>
            <div class="method-name">Bank Transfer</div>
            <div class="method-description">
                Direct transfer from your bank account
            </div>
            <ul class="method-features">
                <li><i class="fas fa-check"></i> All Nepali banks supported</li>
                <li><i class="fas fa-check"></i> Secure bank transfers</li>
                <li><i class="fas fa-check"></i> Account verification</li>
                <li><i class="fas fa-check"></i> Transaction tracking</li>
            </ul>
            <button class="method-button">Bank Transfer</button>
        </div>

        <!-- Mobile Banking -->
        <div class="payment-method" onclick="selectPaymentMethod('mobile_banking')">
            <div class="method-icon">üì±</div>
            <div class="method-name">Mobile Banking</div>
            <div class="method-description">
                Use your bank's mobile banking app
            </div>
            <ul class="method-features">
                <li><i class="fas fa-check"></i> All major banks</li>
                <li><i class="fas fa-check"></i> Secure transactions</li>
                <li><i class="fas fa-check"></i> Real-time processing</li>
                <li><i class="fas fa-check"></i> SMS confirmation</li>
            </ul>
            <button class="method-button">Mobile Banking</button>
        </div>

        <!-- Cash Payment -->
        <div class="payment-method" onclick="selectPaymentMethod('cash')">
            <div class="method-icon">üíµ</div>
            <div class="method-name">Cash Payment</div>
            <div class="method-description">
                Pay in cash at our office or designated locations
            </div>
            <ul class="method-features">
                <li><i class="fas fa-check"></i> Immediate activation</li>
                <li><i class="fas fa-check"></i> Receipt provided</li>
                <li><i class="fas fa-check"></i> Office collection</li>
                <li><i class="fas fa-check"></i> Secure handling</li>
            </ul>
            <button class="method-button">Cash Payment</button>
        </div>
    </div>

    <!-- Security Information -->
    <div class="security-info">
        <h2>üîí Your Payment is Secure</h2>
        <div class="security-grid">
            <div class="security-item">
                <i class="fas fa-shield-alt"></i>
                <h3>SSL Encrypted</h3>
                <p>All transactions are protected with 256-bit SSL encryption</p>
            </div>
            <div class="security-item">
                <i class="fas fa-lock"></i>
                <h3>Secure Payment</h3>
                <p>Your payment information is never stored on our servers</p>
            </div>
            <div class="security-item">
                <i class="fas fa-user-secret"></i>
                <h3>Privacy Protected</h3>
                <p>We follow strict privacy policies and data protection standards</p>
            </div>
            <div class="security-item">
                <i class="fas fa-undo-alt"></i>
                <h3>Money Back Guarantee</h3>
                <p>30-day money back guarantee on all premium subscriptions</p>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="faq-section">
        <h2 style="text-align: center; color: var(--nepal-blue); margin-bottom: 30px;">Payment FAQ</h2>

        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                <span>How long does payment processing take?</span>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
                Digital payments (eSewa, Khalti, cards) are processed instantly. Bank transfers may take 1-2 business days to reflect.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                <span>Can I get a refund?</span>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
                Yes, we offer a 30-day money back guarantee. Contact our support team within 30 days of purchase for a full refund.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                <span>Is my payment information secure?</span>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
                Absolutely. We use industry-standard encryption and never store your payment details. All transactions are PCI DSS compliant.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                <span>What if my payment fails?</span>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
                Don't worry! You can retry payment or contact our support team. We'll help you complete your transaction securely.
            </div>
        </div>
    </div>
</div>

<script>
let selectedMethod = '';

function selectPaymentMethod(method) {
    // Remove selected class from all methods
    document.querySelectorAll('.payment-method').forEach(pm => {
        pm.classList.remove('selected');
    });

    // Add selected class to clicked method
    event.currentTarget.classList.add('selected');
    selectedMethod = method;

    // Store selection in localStorage for checkout
    localStorage.setItem('selectedPaymentMethod', method);
}

function toggleFAQ(element) {
    const answer = element.nextElementSibling;
    const icon = element.querySelector('i');

    if (answer.style.display === 'none' || answer.style.display === '') {
        answer.style.display = 'block';
        icon.classList.remove('fa-chevron-down');
        icon.classList.add('fa-chevron-up');
    } else {
        answer.style.display = 'none';
        icon.classList.remove('fa-chevron-up');
        icon.classList.add('fa-chevron-down');
    }
}

// Check if user came from checkout page
window.addEventListener('load', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const fromCheckout = urlParams.get('from_checkout');

    if (fromCheckout) {
        // Pre-select payment method if returning from checkout
        const savedMethod = localStorage.getItem('selectedPaymentMethod');
        if (savedMethod) {
            const methodElement = document.querySelector(`[onclick="selectPaymentMethod('${savedMethod}')"]`);
            if (methodElement) {
                methodElement.classList.add('selected');
                selectedMethod = savedMethod;
            }
        }
    }
});
</script>
{% endblock %}
